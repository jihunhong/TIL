# tomcat ì¸ìŠ¤í„´ìŠ¤í™” ì‹œí‚¤ê¸°

## ê¸°ì´ˆ í™˜ê²½
ì‹¤ìŠµì—ì„œëŠ” VM ë¦¬ëˆ…ìŠ¤ì— 3ê°€ì§€ì˜ í†°ìº£ì„ ë§Œë“¤ì–´ ì‹¤ìŠµí•´ë´¤ë‹¤.

`ğŸ“ Tomcat`
`ğŸ“ Jenkins Tomcat`
`ğŸ“ cafe24 Tomcat`

ìœ„ ì„¸ê°€ì§€ì˜ í™˜ê²½ì„ ì—°ë™í•˜ì—¬

- ~~ê¸°ë³¸ Tomcatì—ì„œëŠ” Jenkinsì™€ cafe24ì˜ confì˜ ì„¸íŒ…ì„ ë‹´ë‹¹í•œë‹¤.~~
- Jenkins í†°ìº£ì—ì„œëŠ” Jenkinsë¥¼ ì´ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œ, ë¹Œë“œí•œ waríŒŒì¼ì„ cafe24í†°ìº£ webappsì— ì „ì†¡í•œë‹¤.
- cafe24 í†°ìº£ì—ì„œëŠ” Jenkinsì—ì„œ ë°›ì€ ë¹Œë“œ íŒŒì¼ì„ í†µí•´ ì‘ë™í•œë‹¤.

`ğŸ“ Jenkins`ì™€ `ğŸ“ cafe24`ì—ì„œëŠ” binì— `ğŸ“startup.sh`ê³¼ `ğŸ“shutdown.sh`ë¥¼ ìƒì„±í•˜ëŠ”ë°,

#### ğŸ“startup.sh
```shell
#!/usr/bin/env bash
export CATALINA_BASE=/usr/local/cafe24/tomcat-cafe24
export JAVA_OPTS="-Djava.awt.headless=true -server -Xms512m -Xmx1024m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=512m -XX:+DisableExplicitGC"
export CATALINA_OPTS="-Denv=product -Denv.servername=cafe24"

$CATALINA_HOME/bin/catalina.sh start
```

#### ğŸ“shutdown.sh
```shell
#!/usr/bin/env bash

export CATALINA_BASE=/usr/local/cafe24/tomcat-cafe24
export JAVA_OPTS="-Djava.awt.headless=true -server -Xms512m -Xmx1024m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=512m -XX:+DisableExplicitGC"
export CATALINA_OPTS="-Denv=product -Denv.servername=cafe24"

$CATALINA_HOME/bin/catalina.sh stop
```

ë§ˆì§€ë§‰ì¤„ì˜ `$CATALINA_HOME/bin/catalina.sh start/stop`ì„ í†µí•´ ê¸°ë³¸ í†°ìº£ `ğŸ“ Tomcat`ì˜ binìœ¼ë¡œ êµ¬ë™ë˜ëŠ” í˜•ì‹ì´ë‹¤.

ì  í‚¨ìŠ¤ë„ ê°™ì€ ë§¥ë½ìœ¼ë¡œ ë™ì‘í•˜ë©°

`ğŸ“ /etc/init.d`ì— cafe24ì™€ Jenkinsì˜ í†°ìº£ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë„£ëŠ”ê²ƒìœ¼ë¡œ ì„œë²„ êµ¬ë™ì‹œ í†°ìº£ ì‹œì‘ ì„¸íŒ…ì„ ì„¤ì •í•œë‹¤.

ì„œë²„ êµ¬ë™ì‹œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì„ í†µí•´ íŠ¹ì • ë°ëª¬ì˜ ì‹œì‘ì„ ì„¤ì •í•˜ëŠ” ê²ƒì¸ë°

ì´ë¥¼ ì œì–´í•˜ê±°ë‚˜ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ë¡œ **`chkconfig`** ë¥¼ ì‚¬ìš©í•œë‹¤.

```bash
chkconfig --add/--del SERVICE_NAME

chkconfig SERVICE_NAME ON/OFF
```
íŠ¹ì • ë°ëª¬ìš”ì†Œë¥¼ ì œì–´í•˜ê¸°ìœ„í•œ `--add / --del`ê³¼
runlevelì„ ì¡°ì •í•´ ì„œë¹„ìŠ¤ë¥¼ ê»ë‹¤ í‚¤ëŠ” `ON/OFF` ê°™ì€ ëª…ë ¹ì–´ë„ ìŠì§€ë§ì.
